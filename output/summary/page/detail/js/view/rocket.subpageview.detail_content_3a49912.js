!function(t){rocket.subpageview.detail_content=rocket.subpageview.extend({className:"detail-view-subpage",cidList:{1001:"baidu",1002:"ali",1003:"qq",1004:"xiaomi",1005:"jd",1006:"lenovo",1007:"360",1008:"huawei",1009:"jumei",10010:"momo",10011:"chuizi"},tpl:'<div class="c-name"><span class="logo-icon logo-<%=logoIcon%>">待评公司</span></div>\n<div class="c-content">\n	<div class="c-content-scroll">\n\n		<table class="c-content-table">\n			<tr class="first-tr">\n				<th class=" c-content-table-title"><span>【自评】</span>业绩回顾</th>\n				<th class="even">得分</th>\n			</tr>\n			<% if(errno == 0){%>\n				<% _.each(data.self.list, function(item, i){ %>\n				<tr>\n					<td data-content="<%=item.content%>" \n						data-imgsrc="<%=item.imgsrc%>"\n						data-title="<%=item.title%>"\n						class="c-content-title">\n						<%=item.title%> &gt;\n					</td>\n					<% if(i == 0){ %>\n					<td class="even c-content-self-score" rowspan="<%=data.self.list.length%>"><%=data.self.score%></td>\n					<% } %>\n				</tr>\n				<% }) %>	\n			<% } %>\n		</table>\n\n		<table class="c-content-table">\n			<tr>\n				<th class="c-content-table-title"><span>【他评】</span>同行&媒体观点</th>\n				<th class="even">得分</th>\n			</tr>\n			<% if(errno == 0){%>\n				<% _.each(data.other, function(item, i){ %>\n				<tr>\n					<td data-content="<%=item.content%>" \n						data-imgsrc="<%=item.imgsrc%>"\n						data-title="<%=item.title%>"\n						class="c-content-title">\n						<img src="<%= item.avatarsrc %>"><%=item.title%> &gt;\n					</td>\n					<td class="even c-content-self-score"><%= item.score %></td>	\n				</tr>\n				<% }) %>	\n			<% } %>\n		</table>\n		\n	</div>\n</div>\n\n\n',events:{"click .c-content-title":"onPlayerClick"},init:function(n){var e=this;
e.isFirstLoad=!0,e.model=new rocket.model.detail(null,t.extend({},n)),e.cidList=e.model.getCidList(),e.show(),e.showLoading(e.$el)},registerEvents:function(){var t=this,n=t.ec;t.model.on("change",t.render,t),n.on("pagebeforechange",t.onpagebeforechange,t)},unregisterEvents:function(){{var t=this;t.ec}t.model.off("change",t.render,t)},onsubpagebeforechange:function(t){var n=this,e=(t.from,t.to),i=t.params,a=n.getFeatureString(i);if(e==n.ec&&a==n.featureString){if(n.isFirstLoad){if(n.loadingLock)return;
n.loadingLock=!0,n.model.fetch({type:"POST",success:function(){n.isFirstLoad=!1,n.loadingLock=!1},error:function(){n.loadingLock=!1}})}n.$el.show()}},onPlayerClick:function(n){var e=this,i=t(n.currentTarget),a=i.data();e.scrollY=window.scrollY;var o=t("<p></p>").text(a.content),c=t("<h3></h3>").addClass("detail-content-dialog-title").text(a.title);$img=t("<img/>").attr("src",a.imgsrc),$close=t("<span></span>").addClass("detail-content-dialog-close"),$dialogInner=t("<div></div>").addClass("detail-content-dialog-inner").append(c).append($img).append(o).append($close),$dialog=t("<div></div>").append($dialogInner),$dialog.addClass("detail-content-dialog"),$dialog.on("click",function(){$dialog.remove(),window.scrollTo(0,e.scrollY)
}),e.$el.append($dialog),window.scrollTo(0,0)},render:function(n){var e=this,i=e.cidList[e.options.cid],a=n.toJSON();e.ec.detailData=a,e.$el.html(_.template(e.tpl,t.extend({logoIcon:i},a,e.options))),e.append(new rocket.subview.detail_footer(t.extend({},e.options),e)),e.hideLoading()}})}(Zepto);