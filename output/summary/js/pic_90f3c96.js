void function(t){var e=function(t,e){this.$el=t,this.option=e,this.load(e.images)};e.prototype={load:function(t){var e=this,i=[],n=0,h=function(t){var e=document.createElement("DIV");return e.style.position="absolute",e.style.overflow="hidden",t.style.cssText="display:block; height: 100%;width: 100%;",e.appendChild(t),e};e.each(t,function(o,a){var r=document.createElement("IMG");r.src=o;var c={index:a};r.onload=function(){this.onload=null;var o=this.width,a=this.height;c.node=h(r,o,a),c.realHeight=a,c.realWidth=o,++n===t.length&&(e.adjust(i),e.bindEvent())
},i.push(c)}),this.imgs=i},adjust:function(t){var e,i=0,n=this,h=n.option.margin;t=t.slice(0);var o=n.option.unit||n.getUnit(t);n.each(t,function(t){var e=o/t.realHeight;t.height=o,t.width=t.realWidth*e,i+=t.width+h}),document.body.style.height="2000px",e=n.$el.clientWidth-h,document.body.style.height="";var a=i%e,r=a>e/2?i+e-a:i-a,c=Math.floor(r/e),d=r/i;this.each(t,function(t){t.height=(t.height+h)*d,t.width=(t.width+h)*d}),o*=d;var s=0,u=h,l=0;(o+h)*c<document.documentElement.clientHeight&&(l+=10);
for(var v=document.createDocumentFragment();c--&&t.length;){var f=0;s=h+l;var g;n.each(t,function(i,n){return f+=i.width,!t[n+1]||Math.abs(e-f)<Math.abs(e-f-t[n+1].width)?(g=t.splice(0,n+1),!1):void 0}),n.each(g,function(t){t.width*=e/f,t.height*=e/f,n.setPos(t.node,{width:t.width-h,height:t.height-h,left:s,top:u}),s+=t.width,v.appendChild(t.node)}),u+=g[0].height}n.$el.innerHTML="",n.$el.appendChild(v)},getUnit:function(t){var e=this,i=0;e.each(t,function(t){i+=t.realHeight}),i/=t.length;var n=[];
e.each(t,function(t){n.push(Math.abs(t.realHeight-i))}),n.sort(function(t,e){return t-e});var h=n[Math.floor(n.length/4)],o=0;return e.each(t,function(t){return Math.abs(t.realHeight-i)==h?(o=t.realHeight,!1):void 0}),o},each:function(t,e,i){i=i||0;for(var n=i;n<t.length&&e(t[n],n)!==!1;n++);},setPos:function(t,e){var i=t.style.cssText;i+=";";for(var n in e)i+=n+":"+e[n]+"px;";return t.style.cssText=i},bindEvent:function(){var e=t.addEventListener||t.attachEvent,i=this,n=this.throttle(120,function(){i.adjust(i.imgs)
},!1);e("resize",n,!1)},throttle:function(t,e,i){function n(){function n(){o=Date.now(),e.apply(r,d)}function a(){h=void 0}var r=this,c=Date.now()-o,d=arguments;i&&!h&&n(),h&&clearTimeout(h),void 0===i&&c>t?n():h=setTimeout(i?a:n,void 0===i?t-c:t)}var h,o=0;return"function"!=typeof e&&(i=e,e=t,t=250),n}},t.AutoPicture=e}(window);