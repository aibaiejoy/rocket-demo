!function(t){t.ui.create("toolbar",{_data:{titleText:"",buttonText:"返回",buttonClick:function(){setTimeout(function(){history.back(1)},200)},showType:2,isShow:!1,onverticalswipeup:function(){},onverticalswipedown:function(){},isPreventDefault:!0},_create:function(){var a=this,e=t(a.data("container")||document.body),i="",o=a.widget(),r=a.data("tools")||[],n=(a.data("iconMax")||2,t(a.data("renderId")).parent().length>0?!0:!1);if(a.data("toolsA",r),o=o||a.widget(t('<div class="ui-toolbar-container"></div>')),n&&(o=a.widget(t(a.data("renderId")))),a.data("isShow")||o.hide(),tmpA=[],o&&!n){if(a.data("instanceId")&&o.addClass(a.data("instanceId")),i+='<div class="ui-toolbar">',i+=a._createButton(),i+=a._createTitle(),2==a.data("showType"))i+='<div class="ui-toolbar-toolscon"> </div>',i+="</div>",i+=a._createSubTools();
else{i+='<div class="ui-toolbar-toolscon">';for(var d=0;d<r.length;d++)i+='<div data-index="'+d+'" class="ui-toolbar-btn '+(r[d].classN||"")+'">'+(r[d].text||"")+"</div>";i+="</div>",i+="</div>"}o.html(i),o.parent().length&&!a.data("container")||o.parent().length||o.appendTo(e)}else{var s=t(".ui-toolbar-backbtn .ui-toolbar-content",o).text();a.data("buttonText",s);var c=t(".ui-toolbar-title",o).text();a.data("titleText",c);var u=t(".ui-sub-toolbar",o).parent().length>0;a.data("showType",1==u?2:1)
}a.trigger("create")},_createButton:function(){var t=this,a="";return a+='<div class="ui-toolbar-backcon">',a+='<a class="ui-toolbar-backbtn">',a+='<span class="ui-toolbar-content">',a+=t.data("buttonText"),a+="</span>",a+="</a>",a+="</div>"},_createTitle:function(){var t=this,a="";return t.data("titleText")&&(a+='<span class="ui-toolbar-title">',a+=t.data("titleText"),a+="</span>"),a},_createSubTools:function(){var t=this,a="",e=t.data("toolsA");a+='<div class="ui-sub-toolbar"><div class="ui-toolbar-toolscon">';
for(var i=0;i<e.length;i++)a+='<div data-index="'+i+'" class="ui-toolbar-btn '+(e[i].classN||"")+'">'+(e[i].text||"")+"</div>";return a+="</div></div>"},_init:function(){var a=this,e=a.data("toolsA"),i=a.widget();t(".ui-toolbar-backcon",i).on("touchend",a.data("buttonClick")),t(".ui-toolbar-btn",i).each(function(){var i=t(this).attr("data-index"),o=e[i];o&&o.click&&t(this).on("touchstart",function(){var e=t(this).index();o.click(e,t(this),a)})}),i.on("touchstart touchmove touchend",function(t){a._eventHandler(t)
},!1),t(window).on("resize",function(){a._makeWidthEx()}),a.on("destroy",function(){t(window).off()}).trigger("init")},_makeWidthEx:function(){var a=this,e=a.widget(),i=t.os;i.android&&parseInt(i.version)>=4&&e.hide().css("visibility","hidden").show().css("visibility","visible")},_eventHandler:function(a){{var e=this;e.widget()}switch(os=t.os,a.type){case"touchstart":var i=a.targetTouches[0];e.data("touchStartX",i.pageX||0),e.data("touchStartY",i.pageY||0),e.data("isVerticalUpTrigger",!1),e.data("isVerticalDownTrigger",!1);
break;case"touchmove":var i=a.targetTouches[0];e.data("isPreventDefault")&&a.preventDefault();var o=i.pageX-e.data("touchStartX"),r=i.pageY-e.data("touchStartY");if(e.data("touchMoveXL",o),e.data("touchMoveYL",r),Math.abs(e.data("touchMoveYL"))<10)break;Math.abs(e.data("touchMoveXL"))<Math.abs(e.data("touchMoveYL"))&&(e.data("touchMoveYL")>0&&!e.data("isVerticalDownTrigger")?(e.data("isVerticalDownTrigger",!0),e.trigger("verticalswipedown",a)):e.data("touchMoveYL")<0&&!e.data("isVerticalUpTrigger")&&(e.data("isVerticalUpTrigger",!0),e.trigger("verticalswipeup",a)),e.data("touchStartX",0),e.data("touchStartY",0),e.data("touchMoveXL",0),e.data("touchMoveYL",0));
break;case"touchend":if(Math.abs(e.data("touchMoveYL"))<1)break;Math.abs(e.data("touchMoveXL"))<Math.abs(e.data("touchMoveYL"))&&(e.data("touchMoveYL")>0&&!e.data("isVerticalDownTrigger")?(e.data("isVerticalDownTrigger",!0),e.trigger("verticalswipedown",a)):e.data("touchMoveYL")<0&&!e.data("isVerticalUpTrigger")&&(e.data("isVerticalUpTrigger",!0),e.trigger("verticalswipeup",a)),e.data("touchStartX",0),e.data("touchStartY",0),e.data("touchMoveXL",0),e.data("touchMoveYL",0))}},show:function(){var t=this,a=t.widget();
return t.data("isShow")||(t.trigger("beforeshow"),t.data("isShow",!0),a.show(),t.trigger("aftershow")),t},hide:function(){var t=this,a=t.widget();return t.data("isShow")&&(t.data("isShow",!1),t.trigger("beforehide"),a.hide(),t.trigger("afterhide")),t},toggle:function(){{var t=this;t.widget()}return t.data("isShow")?t.hide():t.show(),t},buttonText:function(){var a=this,e=a.widget();return void 0!=arguments[0]?(a.data("buttonText",arguments[0]),t(".ui-toolbar-backbtn .ui-toolbar-content",e).text(arguments[0]),a):a.data("buttonText")
},titleText:function(){var a=this,e=a.widget();return void 0!=arguments[0]?(a.data("titleText",arguments[0]),t(".ui-toolbar-title",e).text(arguments[0]),a):a.data("titleText")},destroy:function(){var t=this;t.widget().off(),t._super()}}).attach("control.fix")}(Zepto);