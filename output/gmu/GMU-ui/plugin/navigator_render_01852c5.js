!function(a,t){a.ui.create("navigator",{_data:{container:"",defTab:0,isSwipe:!0,onverticalswipe:function(){},ontabselect:function(){}},_create:function(){var t=this,e=a(t.data("fixContent"));t._createNavUI(),e&&t._createFixTab(),t.trigger("create")},_init:function(){var e=this,i=e.widget(),r=e.data("navList"),n=e.data("listWrap"),s=e.data("fixElem"),d=e.data("defTab"),o=e.data("tabNum"),c=[];e.data("fixNum")&&s&&s.each(function(a){this.index=a+o}),r.each(function(a){this.index=a,c[a]=a?c[a-1]+parseInt(this.offsetWidth):parseInt(this.offsetWidth)
}),e.data("lastTabIndex",-1),e.data("tabWidthSumArr",c),n.css("width",c[o-1]+"px"),e._loaded(),e.data("wrapOffsetWidth",e.data("myScroll").scrollerW-c[o-1]),e.data("defTab")!=t&&(e.data("isDefTab",!0),e.switchTo(parseInt(d))),s&&s.on("tap",function(a){e._eventHandler(a)}),i.on("touchmove",function(a){e._eventHandler(a)}),a(window).on("onorientationchange"in window?"orientationchange":"resize",function(a){e._eventHandler(a)}),e.trigger("init")},_createNavUI:function(){{var t=this,e=(t.widget(),a(t.data("container")||document.body)[0],a(t.data("content")));
t.data("instanceId")}t.data("screenWrap",e),t.data("listWrap",e.children("ul")),t.data("navList",t.data("listWrap").children("li")),t.data("tabNum",t.data("navList").length)},_createFixTab:function(){var t=this,e=a(t.data("fixContent"));t.data("fixNum",e.length),t.data("fixElem",e)},switchTo:function(t){var e,i=this,r=i.data("tabNum"),n=parseInt(t),s=i.data("fixElem"),d=i.data("navList"),o=i.data("myScroll"),c=i.data("lastTabIndex"),l=a(i.data("content")).find("a"),f=a(i.data("fixContent")).find("a"),h="";
if(n>=r){if(e=a(s[n-r]).children("a")[0],c==n)return e.href="javascript:;",i;a(s[n-r]).addClass("fix-cur"),h=f[n-r].href}else{if(e=a(d[n]).children("a")[0],c==n)return e.href="javascript:;",i;a(d[n]).addClass("cur"),h=l[n].href,i.data("isSwipe")&&o.hScroll&&i._swipeNextPre(n,i._screenPos(n))}return c>=r?a(s[c-r]).removeClass("fix-cur"):c>=0&&a(d[c]).removeClass("cur"),-1!=h.indexOf("#")||-1==c?e.href=h:/javascript/.test(h)||(location.href=h),i.data("lastTabIndex",n),i.trigger("tabselect"),i},getCurTab:function(){var a=this,t=a.data("lastTabIndex"),e=a.data("content"),i=a.data("fixContent"),r=a.data("tabNum"),n=t>=r?i[t-r]:e[t];
return{index:t,info:{text:n.text,url:n.url}}},_switchEventHandle:function(e){var i=this,r="LI"==e.target.tagName?a(e.target)[0]:a(e.target).parents("li").get(0)||a(e.target).parents("div").get(0);r&&r.index!=t&&i.switchTo(r.index)},_loaded:function(){var t=this,e=t.data("screenWrap")[0],i=t.data("isSwipe")?!0:!1,r={};r=new iScroll(e,{hScroll:i,vScroll:!1,hScrollbar:!1,vScrollbar:!1,onScrollMove:function(){setTimeout(a.bind(t._setShadow,t),1)},onScrollEnd:function(a){this.absDistY>this.absDistX&&t.trigger("verticalswipe",a)
},onTouchEnd:function(a){this.moved||this.absDistY||this.isStopScrollAction||t._switchEventHandle(a)}}),t.data("myScroll",r)},_setShadow:function(){var a=this,t=a.data("screenWrap"),e=a.data("myScroll"),i=Math.abs(e.maxScrollX);e.x<0?(t.addClass("ui-navigator-shadowall"),Math.abs(e.x)>=i&&(t.removeClass("ui-navigator-shadowall"),t.addClass("ui-navigator-shadowleft"),t.removeClass("ui-navigator-shadowright"))):(t.removeClass("ui-navigator-shadowall"),t.removeClass("ui-navigator-shadowleft"),t.addClass("ui-navigator-shadowright"))
},_touchMoveHandle:function(a){a.preventDefault()},_swipeNextPre:function(t,e){var i=this,r=0,n=i.data("tabNum"),s=i.data("navList"),d=i.data("myScroll"),o=i.data("isDefTab"),c=d.x||0;switch(e){case"defTab":r=i.data("defTabMoveX")||0,d.scrollTo(r,0,400),o&&(i.data("isDefTab",!1),i.data("defTabMoved",!0));break;case 0:r=0,d.scrollTo(r,0,400),o&&(i.data("isDefTab",!1),i.data("defTabMoved",!0));break;case n-1:r=d.wrapperW-d.scrollerW,d.scrollTo(r,0,400),o&&(i.data("isDefTab",!1),i.data("defTabMoved",!0));
break;case"first":if(1==t&&!c)return;r=c+parseInt(s[t-1].offsetWidth),d.scrollTo(r,0,400);break;case"last":if(t==n-2&&Math.abs(c)==Math.abs(d.maxScrollX))return;r=c-parseInt(s[t-1].offsetWidth),d.scrollTo(r,0,400);break;case"middle":}i.data("isDefTab",!1),setTimeout(a.bind(i._setShadow,i),1)},_screenPos:function(a){var t=this,e=t.data("tabNum")-1;if(!a||a==e)return a;var i=t.data("navList"),r=t.data("tabWidthSumArr"),n=Math.abs(t.data("myScroll").x)||0,s=i[0].offsetLeft-t.data("screenWrap")[0].offsetLeft,d=r[a]+s-n,o=r[a-1]+s-n,c=r[a+1]+s-n,l=t.data("myScroll").wrapperW,f=parseInt(i[a].offsetWidth),h=parseInt(i[a-1].offsetWidth),u="middle";
return t.data("isDefTab")?(u="defTab",t.data("defTabMoveX",l-d),u):u=h>o&&c>l?"middle":f>=d||h>o?"first":d>=l||c>l?"last":"middle"},_orientationEvent:function(){var t=this,e=t.data("myScroll"),i=parseFloat(a.os.version),r=t.data("wrapOffsetWidth"),n=t.data("defTab"),s=t.data("navList"),d=s[0].offsetLeft-t.data("screenWrap")[0].offsetLeft,o=0;o=a.os.android?i>=4?800:200:a.os.ios?0:800,setTimeout(function(){800==o&&e.refresh(),t.data("isSwipe")||t.data("listWrap").css("width",e.wrapperW-r+"px"),!t.data("isDefTab")&&t.data("defTabMoved")&&(e.scrollTo(e.wrapperW-t.data("tabWidthSumArr")[n]-d,0,400),t.data("defTabMoved",!1))
},o)},_eventHandler:function(a){var t=this;switch(a.type){case"tap":t._switchEventHandle(a);break;case"touchmove":t._touchMoveHandle(a);break;case"orientationchange":t._orientationEvent(a);break;case"resize":t._orientationEvent(a)}}}).attach("control.fix")}(Zepto);