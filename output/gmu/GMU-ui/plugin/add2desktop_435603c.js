!function(t){t.ui.create("add2desktop",{_data:{icon:"../../add2desktop/icon.png"},_create:function(){var i=this,a=(i.widget()||i.widget(t("<div></div>"))).addClass("ui-add2desktop").css("display","none"),e=t(i.data("container")||document.body),s=(t.os.ios&&t.os.version.substr(0,3))>4.1?"ui-add2desktop-new":"ui-add2desktop-old",o='<div class="ui-add2desktop-shadowbox"></div><div class="ui-add2desktop-content"><div class="ui-add2desktop-type"><img src="'+i.data("icon")+'"/></div><div class="ui-add2desktop-text">先点击<span class="'+s+'"></span>，<br>再"添加至主屏幕"</div><a href="javascript:;" class="ui-add2desktop-close"><span class="ui-add2desktop-close-btn"></span></a>';
a.html(o).parent().length||a.appendTo(e),i.trigger("create")},_init:function(){var i=this,a=t.os,e=parseFloat(a.version),s=!e,o=a.ios,d=a.android,n=navigator.userAgent,r=i.data("isUC",/Linux/i.test(n)||t.os.ios&&!/safari/i.test(n)&&!/qq/i.test(n)),c=i.data("rotateEV","ortchange");t(".ui-add2desktop-close").on("tap",function(t){i.hide(),(t.originalEvent||t).preventDefault()}),i.data("_winfun",function(){i._setpos()}),t(window).on(c+" scrollStop",i.data("_winfun")),i.widget().css("position",i.data("useFixed",s||o&&e>=5&&!r||d)?"fixed":"absolute"),t(function(){t.later(function(){i.data("available",!0),i._setpos().trigger("init")
},200)})},_setpos:function(){var i=this,a=i.widget();return!i.data("useFixed")&&a.css("top",window.pageYOffset+t(window).height()-85),i.trigger("setpos")},hide:function(){var i=this;return t.later(function(){i.widget().css({display:"none",zIndex:-1,left:-9999}),i.trigger("close")},20),i},show:function(){var i=this;if(t.os.ios){if(!i.data("available"))return t.later(t.bind(i.show,i),20),i;i.widget().css({display:"block",opacity:0}).animate({opacity:1},{duration:100,ease:"ease-in",complete:function(){i.trigger("open")
}})}return i},destroy:function(){var i=this;t(window).off(i.data("rotateEV")+" scrollStop",i.data("_winfun")),t(".ui-add2desktop-close",i.widget()).off().remove(),i.widget().html(""),i._super()}}).attach("control.fix")}(Zepto);